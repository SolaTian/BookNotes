# 过滤数据

## WHERE指定搜索条件
检索两列，但是只返回`列名2`中值为3.49的行

    SELECT 列名1,列名2
    FROM 表名
    WHERE 列名2 = 3.49;

在使用`ORDER BY`子句的时候，必须放在`WHERE`的后面。


`WHERE`中列名可以出现在`SELECT`的列中，或者是未出现的表中的其他列。

## WHERE子句操作符

|操作符|说明|
|-|-|
|=|等于|
|<>|不等于|
|!=|不等于|
|<|小于|
|<=|小于等于|
|!<|不小于|
|>|大于|
|>=|大于等于|
|!>|不大于|
|`BETWEEN`|在指定的两个值之间|
|`IS NULL`|为`NULL`值|
### 检查单个值

检索`列名2`值小于10的所有行

    SELECT 列名1,列名2
    FROM 表名
    WHERE 列名2 < 10;

### 不匹配检查
列出所有`列名2`值不等于10的行，若列下面存放的是字符串，则需要加上单引号，若是数值，则不需加引号

    SELECT 列名1,列名2
    FROM 表名
    WHERE 列名2 <> 10;

    SELECT 列名1,列名2
    FROM 表名
    WHERE 列名1 <> 'str1';

### 范围值检查
列出所有`列名2`值在5和10之间的行。

    SELECT 列名1,列名2
    FROM 表名
    WHERE 列名2 BETWEEN 5 AND 10;

列出所有`列名2`的值为空值的`列名1`的行

    SELECT 列名1
    FROM 表名
    WHERE 列名2 IS NULL;


# 高级数据过滤

## 组合WHERE子句
### AND操作符
`AND`操作符，每一个条件之间都需要加`AND`子句

    SELECT 列名1,列名2,列名3
    FROM 表名
    WHERE 列名4 = 'str1' AND 列名2 <= 4;

### OR操作符
`OR`操作符
    
    SELECT 列名1,列名2,列名3
    FROM 表名
    WHERE 列名4 = 'str1' OR 列名2 <= 4;

`OR`操作符和`AND`操作符可以混合使用，但是优先处理`AND`操作符，实际过程中可以添加括号，便于阅读。

    SELECT 列名1,列名2
    FROM 表名
    WHERE (列名4 = 'str1' OR 列名4 = 'str2')
        AND 列名2 >= 10;

## IN操作符
`IN`操作符用来指定条件范围

    SELECT 列名1,列名2,列名3
    FROM 表名
    WHERE 列名4 IN('str1','str2')
    ORDER BY 列名1;

`IN`操作符和`OR`操作符的功能相当，具有以下优点：
- 在有很多合法选项时，`IN`操作符的语法更清楚；
- 在与其他`AND`和`OR`操作符组合使用`IN`时，求值顺序更加容易管理；
- 合法选项多时，速度比`OR`更快；
- 可以包含其他`SELECT`子句，更加动态地建立`WHERE`子句。

## NOT操作符
`NOT`操作符否定其后所跟的任何条件。

 列出所有`列名4`的值不是`str1`的所有行

    SELECT 列名1
    FROM 表名
    WHERE NOT 列名4 = 'str1'
    ORDER BY 列名1;

    #或者使用<>实现

    SELECT 列名1
    FROM 表名
    WHERE NOT 列名4 <> 'str1'
    ORDER BY 列名1;

在复杂的子句中，使用`NOT`是非常有用的。

# 用通配符进行过滤
之前的所有过滤都是针对已知值进行过滤，使用通配符可以实现对未知值进行过滤。

> 通配符：用来匹配值的一部分特殊字符。

> 搜索模式：由字面值、通配符或两者组合构成的搜索条件。

为了在搜索子句中使用通配符，必须使用`LIKE`操作符，指示数据库软件后面的搜索模式为`通配符匹配`而不是简单的`相等匹配`。

通配符搜索只能用于文本字段，非文本字段不能使用通配符进行搜索

## 百分号（%）通配符

搜索模式`'str1%'`，检索任意以`str1`起头的词。

    SELECT 列名1,列名2
    FROM 表名
    WHERE 列名2 LIKE 'str1%'

搜索模式`'%str2%'`，检索任意以`str2`在中间的词。

    SELECT 列名1,列名2
    FROM 表名
    WHERE 列名2 LIKE '%str2%'

通配符也可以出现在搜索模式的中间，如下找出以F开头，以y结尾的所有行（注意y后面不能有空格，有空格则可能检索不出来我们想要的值，可以在y后面再加上一个`%`）。这一用法可以用来搜索电子邮件。

    SELECT 列名1,列名2
    FROM 表名
    WHERE 列名2 LIKE 'F%y'


## 下划线（_）通配符

下划线通配符的作用和`%`一样，但是它只匹配单个字符，不是多个字符。`DB2`不支持该通配符。

    SELECT 列名1,列名2
    FROM 表名
    WHERE 列名2 LIKE '_ str1'
    ORDER BY 列名2;

显示所有匹配搜索模式的行，一个`_`匹配一个字符，两个`_`匹配两个字符。

## 方括号（[]）通配符

`[]`用来指定一个字符集，必须匹配指定位置（通配符位置）的一个字符。

    SELECT 列名1
    FROM 表名
    WHERE 列名1 LIKE '[JM]%'
    ORDER BY 列名1;

使用了两个不同的通配符，`[]`只能匹配`JM`中的单个字符，多于一个字符的名字都不匹配，`%`匹配第一个字符之后任意数目的字符。


下面这两个表示的是上面的否定

    SELECT 列名1
    FROM 表名
    WHERE 列名1 LIKE '[^JM]%'
    ORDER BY 列名1;

    SELECT 列名1
    FROM 表名
    WHERE NOT 列名1 LIKE '[JM]%';
    ORDER BY 列名1;

通配符的操作更加耗时，使用的时候尽量不要把通配符放在开头处。